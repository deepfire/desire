<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>

<title>Overview of desire, a software knowledge and distribution system</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2009-11-04 23:08:26 MSK"/>
<meta name="author" content="Samium Gromoff"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Overview of desire, a software knowledge and distribution system</h1>


<div style="text-align: center">
<p>October 26, 2009, 14:18
</p>
</div>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 About this document </a></li>
<li><a href="#sec-2">2 What is desire (supposed to be)? </a></li>
<li><a href="#sec-3">3 How to obtain desire? </a></li>
<li><a href="#sec-4">4 Overview of terms </a>
<ul>
<li><a href="#sec-4.1">4.1 Distributors </a>
<ul>
<li><a href="#sec-4.1.1">4.1.1 Wishmaster </a></li>
</ul>
</li>
<li><a href="#sec-4.2">4.2 Remotes </a>
<ul>
<li><a href="#sec-4.2.1">4.2.1 Gate remotes </a></li>
</ul>
</li>
<li><a href="#sec-4.3">4.3 Modules </a></li>
<li><a href="#sec-4.4">4.4 Systems </a></li>
<li><a href="#sec-4.5">4.5 Applications </a></li>
<li><a href="#sec-4.6">4.6 Localities </a></li>
</ul>
</li>
<li><a href="#sec-5">5 API (aka end-user interface) </a>
<ul>
<li><a href="#sec-5.1">5.1 Performing knowledge base queries </a></li>
<li><a href="#sec-5.2">5.2 Initial chores &amp; storage location choice </a></li>
<li><a href="#sec-5.3">5.3 Making wishes </a>
<ul>
<li><a href="#sec-5.3.1">5.3.1 Reader macros for add-module </a></li>
</ul>
</li>
<li><a href="#sec-5.4">5.4 Less frequently used functions </a></li>
</ul>
</li>
<li><a href="#sec-6">6 Workflow </a>
<ul>
<li><a href="#sec-6.1">6.1 Streamlined bootstrap </a></li>
<li><a href="#sec-6.2">6.2 Normal, non-bootstrap use </a>
<ul>
<li><a href="#sec-6.2.1">6.2.1 User  aspect </a></li>
<li><a href="#sec-6.2.2">6.2.2 Wishmaster aspect </a></li>
<li><a href="#sec-6.2.3">6.2.3 Extending definitions </a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-7">7 Shortcomings </a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> About this document </h2>
<div class="outline-text-2" id="text-1">


<p>
This document has a canonical location:
</p>
<p>
<a href="http://www.feelingofgreen.ru/shared/git/desire/doc/overview.html">http://www.feelingofgreen.ru/shared/git/desire/doc/overview.html</a>
</p>
<p>
or, for the Org-mode source:
</p>
<p>
<a href="http://www.feelingofgreen.ru/shared/git/desire/doc/overview.org">http://www.feelingofgreen.ru/shared/git/desire/doc/overview.org</a>
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> What is desire (supposed to be)? </h2>
<div class="outline-text-2" id="text-2">


<p>
The domain of desire includes software distribution points, software
modules and applications.  All these terms are represented internally
in a detailed, comprehensive manner, and full knowledge about them is
maintained in a PRINT/READ-able form, and is easily transportable<sup><a class="footref" name="fnr.1" href="#fn.1">1</a></sup>
between desire nodes.
</p>
<p>
There are three sides of desire:
</p><ul>
<li>
 a knowledge base about world of software,
</li>
<li>
 maximally streamlined software retrieval, and
</li>
<li>
 redistribution.

</li>
</ul>

<p>Desire shares concepts with and provides features like, at least:
</p><ul>
<li>
 asdf-install
</li>
<li>
 mudballs
</li>
<li>
 clbuild

</li>
</ul>

<p>Desire uses the Git distributed version control system to pass around
the domain-specific information, as well as for software redistribution,
and tries not to lose the 'distributed' part of it.  Ideally, desire would
ease distributed, cross-project cooperation and coordinated release making.
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> How to obtain desire? </h2>
<div class="outline-text-2" id="text-3">


<p>
Desire can be obtained at:
</p>
<p>
git://git.feelingofgreen.ru/desire
</p>
<p>
but please see <a href="#sec-3">streamlined bootstrap</a>.
</p>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Overview of terms </h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4.1" class="outline-3">
<h3 id="sec-4.1"><span class="section-number-3">4.1</span> Distributors </h3>
<div class="outline-text-3" id="text-4.1">


<p>
The largest unit of software granularity is a 'distributor', which
corresponds to an internet domain name<sup><a class="footref" name="fnr.2" href="#fn.2">2</a></sup>.  Currently, they don't carry
much information beyond just that.
</p>
<p>
Distributors contain one or more 'remotes', which are typical points
of distribution corresponding to sets of similarly-named repositories.
</p>

</div>

<div id="outline-container-4.1.1" class="outline-4">
<h4 id="sec-4.1.1"><span class="section-number-4">4.1.1</span> Wishmaster </h4>
<div class="outline-text-4" id="text-4.1.1">


<p>
'Wishmaster' is a subtype of distributor which participates in the
desire network, in the form of having a 'gate remote', upon which
we will elaborate further below.
</p>
<p>
This participation is twofold &ndash; information passing and module
conversion (better term?).
</p>
<p>
The information exchanged is that of wishmaster ideas about the world
of software, that is, about all terms covered in this section.
</p>
<p>
The module conversion serves to simplify life of average desire users
by repackaging modules available through a variety of distribution
means into a common DVCS format.
</p>
</div>
</div>

</div>

<div id="outline-container-4.2" class="outline-3">
<h3 id="sec-4.2"><span class="section-number-3">4.2</span> Remotes </h3>
<div class="outline-text-3" id="text-4.2">


<p>
The concept of remote serves (or actually, the more general type of
location does) as a point of distribution for a group of modules.
</p>
<p>
Remotes combine following concepts:
</p><ul>
<li>
version control system type (git, darcs, cvs or svn)
</li>
<li>
transport type (native, http or rsync)
</li>
<li>
simple pattern for matching module pathes on the distributor
</li>
<li>
an internet port number

</li>
</ul>

</div>

<div id="outline-container-4.2.1" class="outline-4">
<h4 id="sec-4.2.1"><span class="section-number-4">4.2.1</span> Gate remotes </h4>
<div class="outline-text-4" id="text-4.2.1">


<p>
Gate remotes are special remotes which participate in the desire
protocol.  They have a special module called '.meta', which contains
the containing distributor's idea about the world in a special file
with name 'DEFINITIONS'.
</p>
<p>
The information in this file is subject to propagation in the network
of hosts participating in the desire protocol.
</p>
<p>
Distributors recorded in these definitions are considered 'well-known'.
</p>
<p>
Gate remotes have a second purpose: as parts of well-known wishmasters
they serve for redistribution of modules converted by those wishmasters
into a single repository format, currently 'git'.  The modules converted
in such a way are advertised differently from those which are considered
'released' by the containing distributor.
</p>
</div>
</div>

</div>

<div id="outline-container-4.3" class="outline-3">
<h3 id="sec-4.3"><span class="section-number-3">4.3</span> Modules </h3>
<div class="outline-text-3" id="text-4.3">


<p>
Modules represent units of software, as released by the distributor,
and contain the information remaining to complete the information
provided by less granular concepts to construct a module address.
</p>
<p>
Modules can be provided by several different remotes of different
distributors.  When retrieval of a module is requested, gate remotes
are preferred above others.
</p>
</div>

</div>

<div id="outline-container-4.4" class="outline-3">
<h3 id="sec-4.4"><span class="section-number-3">4.4</span> Systems </h3>
<div class="outline-text-3" id="text-4.4">


<p>
Descending further down we meet systems.
Systems are objects only meant to be relevant in the domain of Common Lisp
software, and more precisely &ndash; to backend system definition facilities,
such as ASDF, XCVB, Mudballs or others<sup><a class="footref" name="fnr.3" href="#fn.3">3</a></sup>.
</p>
<p>
The concept of system introduces inter-system dependencies, which cross
module boundaries, producing inter-module dependencies.
</p>
<p>
Evidently, there can be several systems per module, and also those
can be obscured from the end-user, either intentionally or by unfortunate
accident<sup><a class="footref" name="fnr.4" href="#fn.4">4</a></sup>.
</p>
<p>
Desire handles all these complications and operates on the full
inter-module dependency graph.  It also doesn't store that graph anywhere,
recomputing it instead every time a request for module is performed.
</p>
</div>

</div>

<div id="outline-container-4.5" class="outline-3">
<h3 id="sec-4.5"><span class="section-number-3">4.5</span> Applications </h3>
<div class="outline-text-3" id="text-4.5">


<p>
Applications are simple extensions of systems, providing some very
preliminary support for launching applications, potentially simplifiable
to the point of the end-user being able to say "run climacs" and
have everything downloaded, required systems loaded and the application
up and running.
</p>
</div>

</div>

<div id="outline-container-4.6" class="outline-3">
<h3 id="sec-4.6"><span class="section-number-3">4.6</span> Localities </h3>
<div class="outline-text-3" id="text-4.6">


<p>
The more general type of 'location' besides remotes also includes
'localities', which serve the same purpose as remotes, but on the local
machine.  Master localities are canonical locations for module repositories
managed by a specific VCS type.
</p>
<p>
The master git locality is a canonical location for both release and
converted module redistribution.
</p>
</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> API (aka end-user interface) </h2>
<div class="outline-text-2" id="text-5">


</div>

<div id="outline-container-5.1" class="outline-3">
<h3 id="sec-5.1"><span class="section-number-3">5.1</span> Performing knowledge base queries </h3>
<div class="outline-text-3" id="text-5.1">

<dl>
<dt>distributor name &amp;key (if-does-not-exist :error) =&gt; distributor</dt><dd>

</dd>
<dt>remote name &amp;key (if-does-not-exist :error) =&gt; remote</dt><dd>

</dd>
<dt>module name &amp;key (if-does-not-exist :error) =&gt; module</dt><dd>

</dd>
<dt>system name &amp;key (if-does-not-exist :error) =&gt; system</dt><dd>

</dd>
<dt>app name &amp;key (if-does-not-exist :error) =&gt; app</dt><dd>

</dd>
<dt>locality name &amp;key (if-does-not-exist :error) =&gt; locality</dt><dd>

<p>
Find objects by name.
</p>
</dd>
<dt>name object =&gt; symbol</dt><dd>

<p>
Yield object's name.
</p>
</dd>
<dt>url remote-designator &amp;optional module-specifier =&gt; string</dt><dd>

<p>
Compute the URL of a module designated by MODULE-SPECIFIER contained a remote designated by
REMOTE-DESIGNATOR.
</p>
</dd>
<dt>apropos-desr string-designator &amp;optional set-designator =&gt; &lt;no values&gt;</dt><dd>

<p>
Like APROPOS, but finds objects from the domain of Desire.
</p>
</dd>
<dt>apropos-desr-list string-designator &amp;optional set-designator =&gt; desirables</dt><dd>

<p>
Like APROPOS-LIST, but finds objects from the domain of Desire.
</p>
</dd>
<dt>list-modules =&gt; &lt;no values&gt;</dt><dd>

<p>
List all known modules, with some additional information.
</p>
</dd>
<dt>module-present-p module-designator &amp;optional (locality (gate <code>*self*</code>)) check-when-present-p (check-when-missing-p t) =&gt; boolean</dt><dd>

<p>
Determine whether module designated by MODULE-DESIGNATOR is present in LOCALITY, which defaults
to the local gate locality.
</p>
</dd>
<dt>system-loadable-p system-designator &amp;optional (locality (gate <code>*self*</code>)) =&gt; generalised-boolean</dt><dd>

<p>
Determine whether system designated by SYSTEM-DESIGNATOR is loadable in LOCALITY, which defaults
to the local gate locality.
</p>
</dd>
<dt>module-best-remote module-designator &amp;key (if-does-not-exist :error) =&gt; remote</dt><dd>

<p>
Produce the remote, if any, which will be chosen to satisfy desires for module
designated by MODULE-DESIGNATOR.
</p>
</dd>
<dt>module-best-distributor module-designator &amp;key (if-does-not-exist :error) =&gt; remote</dt><dd>

<p>
Produce the distributor, if any, whose remote will be chosen to satisfy desires
for module designated by MODULE-DESIGNATOR.
</p>
</dd>
</dl>
</div>

</div>

<div id="outline-container-5.2" class="outline-3">
<h3 id="sec-5.2"><span class="section-number-3">5.2</span> Initial chores &amp; storage location choice </h3>
<div class="outline-text-3" id="text-5.2">


<dl>
<dt>init path &amp;key as (default-wishmasters (list desr:*default-wishmaster*)) =&gt; boolean</dt><dd>

<p>
Initialise Desire with PATH chosen as directory for storage of all VCS-specific locations.
</p>
<p>
When AS is non-NIL an attempt is made to establish an identity to a defined distributor
named by the AS keyword.
</p>
<p>
This is performed by checking that the locally available set of modules covers every module
that is claimed to be "well known" to be published by our distributor<sup><a class="footref" name="fnr.5" href="#fn.5">5</a></sup>.  When this check
fails an error is signalled.
</p>
</dd>
<dt><code>*desire-root*</code></dt><dd>

<p>
The root directory containing all VCS-specific locations, set during INIT-time.
</p>
</dd>
</dl>
</div>

</div>

<div id="outline-container-5.3" class="outline-3">
<h3 id="sec-5.3"><span class="section-number-3">5.3</span> Making wishes </h3>
<div class="outline-text-3" id="text-5.3">


<dl>
<dt>lust &amp;rest module-names =&gt; boolean</dt><dd>

<p>
Make modules with MODULE-NAMES locally available.
</p>
</dd>
<dt>add-module url &amp;optional module-name &amp;key systemlessp (system-type desr:*default-system-type*) (lust desr:*auto-lust*) =&gt; module</dt><dd>

<p>
Define a new module, with download location specified by URL, and the module's name
either deduced from the URL, or provided via MODULE-NAME.
</p>
<p>
When LUST is non-NIL, the module is localised.
</p>
</dd>
<dt>update-module module-specifier &amp;optional (locality (gate <b>self</b>)) =&gt; &lt;no values&gt;</dt><dd>

<p>
Update a module designated by MODULE-SPECIFIER, possibly specifying the target LOCALITY.
</p>
</dd>
</dl>

</div>

<div id="outline-container-5.3.1" class="outline-4">
<h4 id="sec-5.3.1"><span class="section-number-4">5.3.1</span> Reader macros for add-module </h4>
<div class="outline-text-4" id="text-5.3.1">


<p>
Following reader macro is enabled by install-add-module-reader:
</p>
<pre class="example">
#@"u://r.l"
#@("u://r.l" &amp;optional module-name &amp;key (lust *auto-lust*))
</pre>


</div>
</div>

</div>

<div id="outline-container-5.4" class="outline-3">
<h3 id="sec-5.4"><span class="section-number-3">5.4</span> Less frequently used functions </h3>
<div class="outline-text-3" id="text-5.4">


<dl>
<dt>system-definition system repository-path &amp;key (if-does-not-exist :error) =&gt; pathname</dt><dd>

<p>
Return the pathname of the SYSTEM's definition.
</p>
</dd>
<dt>clear-definitions =&gt; &lt;no values&gt;</dt><dd>

<p>
Forget everything. A subsequent LOAD-DEFINITIONS will be instrumental to continue any productive use.
</p>
</dd>
<dt>save-current-definitions &amp;key seal =&gt; &lt;no values&gt;</dt><dd>

<p>
Write out the current idea about the Desire's domain into DEFINITIONS,
optionally committing changes, when SEAL is non-NIL.
</p>
</dd>
<dt>load-definitions &amp;key (source <b>self</b>) (force-source (eq source <b>self</b>)) (metastore (meta-path)) =&gt; &lt;no values&gt;</dt><dd>

<p>
Append definitions currently available in METASTORE to the current idea about
Desire's domain.
</p>
</dd>
</dl>
</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Workflow </h2>
<div class="outline-text-2" id="text-6">


</div>

<div id="outline-container-6.1" class="outline-3">
<h3 id="sec-6.1"><span class="section-number-3">6.1</span> Streamlined bootstrap </h3>
<div class="outline-text-3" id="text-6.1">


<p>
As another step in achieving user relief, desire includes a booststrap script,
whose canonical permanent location is:
</p>
<p>
<a href="http://www.feelingofgreen.ru/shared/git/desire/climb.sh">http://www.feelingofgreen.ru/shared/git/desire/climb.sh</a>
</p>
<p>
This script performs following operations:
</p>
<ul>
<li>
 use git to download modules desire depends on, placing them in a
subdirectory of /tmp,
</li>
<li>
 load and perform an initial setup of desire,
</li>
<li>
 optionally install a desired module and its dependencies;

</li>
</ul>

<p>Climb.sh depends on git and bash. Invoke it like this:
</p>
<pre class="example">
climb.sh ABSOLUTE-ROOT-PATH [MODULE-NAME [BOOTSTRAP-HOST]]
</pre>


<p>
These arguments have the following semantics:
</p>
<ol>
<li>
ABSOLUTE-ROOT-PATH should be an empty, writable filesystem location.
That is, the exact filename must not exist, but its parent directory
must exist, and be writable by the invoking user.

</li>
<li>
The optional MODULE-NAME allows automatic retrieval and installation
of a certain desired module.  When the module contains a system of
the same name, that system will be loaded.  When an application with
a same name incidentally exists within the loaded system, that application
will be started as well.

</li>
<li>
BOOTSTRAP-HOST allows choice of a bootstrap host different from
the default, git.feelingofgreen.ru.  That other host must contain Desire
and its dependencies published via git-daemon.

</li>
</ol>

<p>The root location will be registered as root directory for per-VCS localities,
serving to satisfy storage needs arising from user module retrieval requests.
</p>
<p>
The path to the 'git/.asdf-registry/' subdirectory of this root directory
should be pushed into ASDF:*CENTRAL-REGISTRY*, if ASDF is to have access
to modules in the desire's pool after the bootstrap script is exited.
</p>
<p>
A number of environment variables affect the behavior of climb.sh:
</p>
<dl>
<dt>EXPLAIN</dt><dd>
Cause the bootstrap script to make desire explain
invocations of external programs, once it's loaded and active.
</dd>
<dt>VERBOSE</dt><dd>
Further extend desire's verbosity while running external
programs.
</dd>
<dt>BRANCH</dt><dd>
Check out a branch of desire, other than 'master'.
A corresponding metastore branch will be checked out.
</dd>
<dt>METABRANCH</dt><dd>
Check out a metastore branch different from either the
default, 'master', or whatever was specified by the
environment variable BRANCH.
</dd>
<dt><code>DISABLE_DEBUGGER</code></dt><dd>
Print a backtrace and exit with an error status,
on errors during operation of desire, once it's loaded.  The default
is to invoke a debugger.
</dd>
<dt>DEBUG</dt><dd>
Globally enable optimisation for debug for all compiled Lisp code.

</dd>
</dl>
</div>

</div>

<div id="outline-container-6.2" class="outline-3">
<h3 id="sec-6.2"><span class="section-number-3">6.2</span> Normal, non-bootstrap use </h3>
<div class="outline-text-3" id="text-6.2">


<p>
The INIT procedure ensures that your desire node is in working order.
</p>
<p>
Depending on whether you run a well-known desire node (that is, a wishmaster)
you need to provide the :AS keyword to INIT:
</p>
<p>
(init "<i>path/to/root</i>"), for non-well-known mode
or:
(init "<i>path/to/root</i>" :as 'your-node-domain-name), for wishmaster mode
</p>
<p>
The specified root directory will contain all VCS-specific master localities,
as well as anything module's post-install scripts choose to deliver.
This specified pathname will be stored in the <code>*DESIRE-ROOT*</code> global variable,
and will henceforth be referred as such.
</p>
<p>
Unless you already have a '.meta' module, an initial seed version will be
downloaded for you.  Currently the wishmaster chosen for this is
git.feelingofgreen.ru.
</p>
<p>
This procedure also determines the available VCS tools, as well as conversion
tools, and determines the set of accessible remotes.
</p>
<p>
Further, it scans the git locality for known modules, and makes their systems
registered in the ASDF registry.
</p>

</div>

<div id="outline-container-6.2.1" class="outline-4">
<h4 id="sec-6.2.1"><span class="section-number-4">6.2.1</span> User  aspect </h4>
<div class="outline-text-4" id="text-6.2.1">


<p>
Unless you happen to have some conversion tools, the set of modules available
to your node is restricted to those available via git remotes.
</p>
<p>
The LUST function serves to initially download and update a set of defined
modules.
</p>
<p>
APROPOS-DESR and LIST-MODULES provide convenient knowledge base query
facilities. For a wider set of functions, please see section 3.
</p>
</div>

</div>

<div id="outline-container-6.2.2" class="outline-4">
<h4 id="sec-6.2.2"><span class="section-number-4">6.2.2</span> Wishmaster aspect </h4>
<div class="outline-text-4" id="text-6.2.2">


<p>
From the wishmaster point of view (note that this happens the INIT function
also does:
</p>
<ul>
<li>
 checks that the locally available set of modules covers every module
that is claimed to be "well known" to be published by our
distributor<sup><a class="footref" name="fnr.5.2" href="#fn.5">5</a></sup>, otherwise signalling an error
</li>
<li>
 publishes the informations about non-"well known", converted modules
in the gate remote's DEFINITIONS file

</li>
<li id="sec-6.2.2.1">External executables required for module conversion <br/>

<p>
The conversion is performed by external programs:
</p>
<ul>
<li>
 darcs-to-git<sup><a class="footref" name="fnr.6" href="#fn.6">6</a></sup>
</li>
<li>
 git cvs, debian package git-cvs
</li>
<li>
 git svn, debian package git-svn

</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-6.2.3" class="outline-4">
<h4 id="sec-6.2.3"><span class="section-number-4">6.2.3</span> Extending definitions </h4>
<div class="outline-text-4" id="text-6.2.3">


<p>
ADD-MODULE and the accompanying reader macro #@"u://r.l/" is a one-stop
point useful for manual extension of the set of known entities.  The URI
type of the URL must name to the VCS used at the given distribution point,
that is one of 'git', 'http' (which actually means git+http), 'darcs',
'cvs' or 'svn'.
</p>
<p>
The required super-entities are either found among current definitions,
or created on the spot.
</p>
<p>
SAVE-CURRENT-DEFINITIONS writes out changes into
&lt;value-of-*DESIRE-ROOT*&gt;/git/.meta/DEFINITIONS
</p>
</div>
</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Shortcomings </h2>
<div class="outline-text-2" id="text-7">


<p>
Some known problems:
</p>
<ul>
<li>
consumers of DEFINITIONS execute remote code, essentially
</li>
<li>
SBCL-only
</li>
<li>
ASDF-only
</li>
<li>
Linux-only (might work on other unices)
</li>
<li>
has a non-trivial amount of CL library dependencies, half of them
not exactly being common
</li>
<li>
calls out to an obscene amount of external executables, thereby only
being able to guess about failure reasons

</li>
</ul>


<hr/>









</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">
<p class="footnote"><sup><a class="footnum" name="fn.1" href="#fnr.1">1</a></sup> Not entirely, but some merging functionality is already in place.
</p>
<p class="footnote"><sup><a class="footnum" name="fn.2" href="#fnr.2">2</a></sup> Actually, sometimes a group of domain names, like in case of sourceforge.
</p>
<p class="footnote"><sup><a class="footnum" name="fn.3" href="#fnr.3">3</a></sup> Currently, the only backend system implemented is ASDF.
</p>
<p class="footnote"><sup><a class="footnum" name="fn.4" href="#fnr.4">4</a></sup> Recovering such hidden systems complicates construction of full dependency graph in case of ASDF.
</p>
<p class="footnote"><sup><a class="footnum" name="fn.5" href="#fnr.5">5</a></sup> This is tied to the concept of well known release locations and differs
from the set of modules converted and reexported in the wishmaster
process.
</p>
<p class="footnote"><sup><a class="footnum" name="fn.6" href="#fnr.6">6</a></sup> Available through git://github.com/purcell/darcs-to-git.git/
</p>
</div>
</div>
<div id="postamble">
<p class="author"> Author: Samium Gromoff
<a href="mailto:_deepfire@feelingofgreen.ru">&lt;_deepfire@feelingofgreen.ru&gt;</a>
</p>
<p class="date"> Date: 2009-11-04 23:08:26 MSK</p>
<p class="creator">HTML generated by org-mode 6.32b in emacs 23</p>
</div>
</div>
</body>
</html>
